<?xml version="1.0" encoding="utf-8" ?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                    xmlns:sfbusy="clr-namespace:Syncfusion.Maui.Core;assembly=Syncfusion.Maui.Core">

    <!-- ✅ TEMPLATE 1: LOADING OVERLAY CONTROL TEMPLATE -->
    <ControlTemplate x:Key="LoadingOverlayTemplate">
        <Grid x:Name="LoadingGrid" 
             IsVisible="{Binding IsLoading}"
             BackgroundColor="#50000000"
             InputTransparent="False">

            <Border BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}"
                 Stroke="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray600}}"
                 StrokeThickness="0.5"
                 Padding="32,24"
                 HorizontalOptions="Center"
                 VerticalOptions="Center"
                 Shadow="{AppThemeBinding Light={StaticResource ButtonShadow}, Dark={StaticResource ButtonShadowDark}}">

                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12" />
                </Border.StrokeShape>

                <StackLayout Spacing="16" HorizontalOptions="Center">

                    <!-- 🌺 Orchid icon + Loading text inline -->
                    <StackLayout Orientation="Horizontal" Spacing="12" HorizontalOptions="Center">
                        <Label Text="🌺"
                     FontSize="20"
                     VerticalOptions="Center" />
                        <Label Text="Loading..."
                     FontSize="16"
                     TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource Gray100}}"
                     VerticalOptions="Center" />
                    </StackLayout>

                    <!-- 🎯 Compact LinearMaterial progress bar -->
                    <sfbusy:SfBusyIndicator IsRunning="{Binding IsLoading}"
                           AnimationType="LinearMaterial"
                           IndicatorColor="{StaticResource Primary}"
                           WidthRequest="160"
                           HeightRequest="4"
                           HorizontalOptions="Center" />

                </StackLayout>
            </Border>
        </Grid>

    </ControlTemplate>

    <!-- Para EditPage com IsBusy -->
    <ControlTemplate x:Key="SavingOverlayTemplate">
        <Grid x:Name="SavingGrid" 
             IsVisible="{Binding IsBusy}"
             BackgroundColor="#90000000"
             InputTransparent="False">
            
            <Border BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}"
                 Stroke="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray600}}"
                 StrokeThickness="0.5"
                 Padding="32,24"
                 HorizontalOptions="Center"
                 VerticalOptions="Center"
                 Shadow="{AppThemeBinding Light={StaticResource ButtonShadow}, Dark={StaticResource ButtonShadowDark}}">

                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12" />
                </Border.StrokeShape>

                <StackLayout Spacing="16" HorizontalOptions="Center">

                    <!-- 🌺 Orchid icon + Loading text inline -->
                    <StackLayout Orientation="Horizontal" Spacing="12" HorizontalOptions="Center">
                        <Label Text="💾"
                     FontSize="20"
                     VerticalOptions="Center" />
                        <Label Text="Saving..."
                     FontSize="16"
                     TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource Gray100}}"
                     VerticalOptions="Center" />
                    </StackLayout>

                    <!-- 🎯 Compact LinearMaterial progress bar -->
                    <sfbusy:SfBusyIndicator IsRunning="{Binding IsBusy}"
                           AnimationType="LinearMaterial"
                           IndicatorColor="{StaticResource Primary}"
                           WidthRequest="160"
                           HeightRequest="4"
                           HorizontalOptions="Center" />

                </StackLayout>
            </Border>            
            
        </Grid>
    </ControlTemplate>

    <!-- ✅ ESTILOS PARA APLICAR OS TEMPLATES -->
    <Style x:Key="LoadingOverlayStyle" TargetType="ContentView">
        <Setter Property="ControlTemplate" Value="{StaticResource LoadingOverlayTemplate}" />
    </Style>

    <Style x:Key="SavingOverlayStyle" TargetType="ContentView">
        <Setter Property="ControlTemplate" Value="{StaticResource SavingOverlayTemplate}" />
    </Style>

</ResourceDictionary>